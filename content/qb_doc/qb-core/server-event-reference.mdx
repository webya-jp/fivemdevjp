---
description: Learn about and how to use common core server events!
---

# ğŸ–¥ ã‚µãƒ¼ãƒãƒ¼ Event ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### QBCore:Server?:CloseServer

* Event ã¯ã‚µãƒ¼ãƒãƒ¼ãŒé–‰ã˜ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™

```lua
RegisterNetEvent('QBCore:Server:CloseServer', function(reason)
    local src = source
    if QBCore.Functions.HasPermission(src, 'admin') then
        reason = reason or 'No reason specified'
        QBCore.Config.Server.Closed = true
        QBCore.Config.Server.ClosedReason = reason
        for k in pairs(QBCore.Players) do
            if not QBCore.Functions.HasPermission(k, QBCore.Config.Server.WhitelistPermission) then
                QBCore.Functions.Kick(k, reason, nil, nil)
            end
        end
    else
        QBCore.Functions.Kick(src, 'You don\'t have permissions for this..', nil, nil)
    end
end)
```

### QBCore:Server?:OpenServer

* Event ã§ã‚µãƒ¼ãƒãƒ¼ãŒé–‹ã„ã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹

```lua
RegisterNetEvent('QBCore:Server:OpenServer', function()
    local src = source
    if QBCore.Functions.HasPermission(src, 'admin') then
        QBCore.Config.Server.Closed = false
    else
        QBCore.Functions.Kick(src, 'You don\'t have permissions for this..', nil, nil)
    end
end)
```

### QBCore:ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼ã®æ›´æ–°

* playerãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ã¨ä¿å­˜ã®ãŸã‚ã®Event

```lua
RegisterNetEvent('QBCore:UpdatePlayer', function()
    local src = source
    local Player = QBCore.Functions.GetPlayer(src)
    if not Player then return end
    local newHunger = Player.PlayerData.metadata['hunger'] - QBCore.Config.Player.HungerRate
    local newThirst = Player.PlayerData.metadata['thirst'] - QBCore.Config.Player.ThirstRate
    if newHunger <= 0 then newHunger = 0 end
    if newThirst <= 0 then newThirst = 0 end
    Player.Functions.SetMetaData('thirst', newThirst)
    Player.Functions.SetMetaData('hunger', newHunger)
    TriggerClientEvent('hud:client:UpdateNeeds', src, newHunger, newThirst)
    Player.Functions.Save()
end)
```

### QBCore:Server?:ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨­å®š

* ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹ãŸã‚ã®Event

```lua
RegisterNetEvent('QBCore:Server:SetMetaData', function(meta, data)
    local src = source
    local Player = QBCore.Functions.GetPlayer(src)
    if meta == 'hunger' or meta == 'thirst' then
        if data > 100 then
            data = 100
        end
    end
    if Player then
        Player.Functions.SetMetaData(meta, data)
    end
    TriggerClientEvent('hud:client:UpdateNeeds', src, Player.PlayerData.metadata['hunger'], Player.PlayerData.metadata['thirst'])
end)
```

### QBCore:ãƒˆã‚°ãƒ«ãƒ‡ãƒ¥ãƒ¼ãƒ†ã‚£

* Event ã¯ player ã®å‹¤å‹™ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹

```lua
RegisterNetEvent('QBCore:ToggleDuty', function()
    local src = source
    local Player = QBCore.Functions.GetPlayer(src)
    if not Player then return end
    if Player.PlayerData.job.onduty then
        Player.Functions.SetJobDuty(false)
        TriggerClientEvent('QBCore:Notify', src, Lang:t('info.off_duty'))
    else
        Player.Functions.SetJobDuty(true)
        TriggerClientEvent('QBCore:Notify', src, Lang:t('info.on_duty'))
    end
    TriggerClientEvent('QBCore:Client:SetDuty', src, Player.PlayerData.job.onduty)
end)
```

### QBCore:ã‚³ãƒãƒ³ãƒ‰å‘¼ã³å‡ºã—

* ãƒãƒ£ãƒƒãƒˆå¤–ã§ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹ Event (ä¾‹: qb-adminmenu)

```lua
RegisterNetEvent('QBCore:CallCommand', function(command, args)
    local src = source
    if not QBCore.Commands.List[command] then return end
    local Player = QBCore.Functions.GetPlayer(src)
    if not Player then return end
    local hasPerm = QBCore.Functions.HasPermission(src, "command."..QBCore.Commands.List[command].name)
    if hasPerm then
        if QBCore.Commands.List[command].argsrequired and #QBCore.Commands.List[command].arguments ~= 0 and not args[#QBCore.Commands.List[command].arguments] then
            TriggerClientEvent('QBCore:Notify', src, Lang:t('error.missing_args2'), 'error')
        else
            QBCore.Commands.List[command].callback(src, args)
        end
    else
        TriggerClientEvent('QBCore:Notify', src, Lang:t('error.no_access'), 'error')
    end
end)
```
