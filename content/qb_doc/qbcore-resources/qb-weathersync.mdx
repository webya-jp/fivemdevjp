---
description: Could someone please turn off the rain?
---

# 🌤 qb-weathersync

## 導入

- 天気の変更と同期のロジックを処理します
- 天気の同期/非同期を設定する機能
- エクスポートを使用して、任意のリソースに気象変化イベントを呼び出す

## 構成

### 一般的な

```lua
Config                  = {}
Config.DynamicWeather   = true -- set this to false if you don't want the weather to change automatically every 10 minutes.

-- On server start
Config.StartWeather     = 'EXTRASUNNY' -- default weather
Config.BaseTime         = 8 -- time
Config.TimeOffset       = 0 -- time offset
Config.FreezeTime       = false -- freeze time
Config.Blackout         = false -- set blackout
Config.BlackoutVehicle  = false -- set blackout affects vehicles
Config.NewWeatherTimer  = 10 -- time (in minutes) between each weather change
Config.Disabled         = false -- set weather disabled
```

### 天気の種類

> [!WARNING]
> 何をしているのか理解していない限り、触らないでください

```lua
Config.AvailableWeatherTypes = {
    'EXTRASUNNY',
    'CLEAR',
    'NEUTRAL',
    'SMOG',
    'FOGGY',
    'OVERCAST',
    'CLOUDS',
    'CLEARING',
    'RAIN',
    'THUNDER',
    'SNOW',
    'BLIZZARD',
    'SNOWLIGHT',
    'XMAS',
    'HALLOWEEN',
}
```

## 輸出

#### 次の天気ステージ

天候を次のステージに切り替えるイベントをトリガーします

例を挙げてみましょう。

```lua
local success = exports["qb-weathersync"]:nextWeatherStage();
```

JavaScriptの例

```javascript
const success = global.exports['qb-weathersync'].nextWeatherStage();
```

#### setWeather \[タイプ]

Config.AvailableWeatherTypesから指定された天気タイプに切り替える

例を挙げてみましょう。

```lua
local success = exports["qb-weathersync"]:setWeather("snow");
```

JavaScriptの例

```javascript
const success = global.exports['qb-weathersync'].setWeather('snow');
```

#### setTime \[時] (分)

指定された時間に基づいて太陽の位置を設定します

例を挙げてみましょう。

```lua
local success = exports["qb-weathersync"]:setTime(8, 10); -- 8:10 AM
```

JavaScriptの例

```javascript
const success = global.exports['qb-weathersync'].setTime(15, 30); // 3:30PM
```

#### ブラックアウトの設定 (true|false)

ブラックアウト状態を設定または切り替え、状態を返します

例を挙げてみましょう。

```lua
local newStatus = exports["qb-weathersync"]:setBlackout(); -- Toggle
```

JavaScriptの例

```javascript
const newStatus = global.exports['qb-weathersync'].setBlackout(true); // Enable
```

#### setTimeFreeze (true|false)

時間停止状態を設定または切り替え、状態を返します

例を挙げてみましょう。

```lua
local newStatus = exports["qb-weathersync"]:setTimeFreeze(); -- Toggle
```

JavaScriptの例

```javascript
const newStatus =
  global.exports['qb-weathersync'].setTimeFreeze(true); // Enable
```

#### setDynamicWeather (true|false)

動的な天気状態を設定または切り替え、状態を返します。

例を挙げてみましょう。

```lua
local newStatus = exports["qb-weathersync"]:setDynamicWeather(); -- Toggle
```

JavaScriptの例

```javascript
const newStatus =
  global.exports['qb-weathersync'].setDynamicWeather(true); // Enable
```

#### ブラックアウト状態を取得する

ブラックアウトが有効か無効かを返します

例を挙げてみましょう。

```lua
local state = exports["qb-weathersync"]:getBlackoutState();
```

JavaScriptの例

```javascript
const state = global.exports['qb-weathersync'].getBlackoutState();
```

#### getTimeFreezeState

時間進行が有効か無効かを返します

例を挙げてみましょう。

```lua
local state = exports["qb-weathersync"]:getTimeFreezeState();
```

JavaScriptの例

```javascript
const state = global.exports['qb-weathersync'].getTimeFreezeState();
```

#### getWeatherState

現在の天気の種類を返します

例を挙げてみましょう。

```lua
local currentWeather = exports["qb-weathersync"]:getWeatherState();
```

JavaScriptの例

```javascript
const currentWeather =
  global.exports['qb-weathersync'].getWeatherState();
```

#### ダイナミックウェザーの取得

時間進行が有効か無効かを返します

例を挙げてみましょう

```lua
local state = exports["qb-weathersync"]:getDynamicWeather();
```

JavaScriptの例

```javascript
const state = global.exports['qb-weathersync'].getDynamicWeather();
```

## イベント

> [!WARNING]
> これらの例はすべてクライアント側でトリガーされます。

#### リクエスト状態同期

```lua
TriggerServerEvent("qb-weathersync:server:RequestStateSync")
```

#### リクエストコマンド

```lua
TriggerServerEvent("qb-weathersync:server:RequestCommands")
```

#### 天気設定

```lua
TriggerServerEvent("qb-weathersync:server:setWeather", type)
```

#### 設定時間

```lua
TriggerServerEvent("qb-weathersync:server:setTime", hour, minute)
```

#### トグルブラックアウト

```lua
TriggerServerEvent("qb-weathersync:server:toggleBlackout", bool)
```

#### フリーズタイムの切り替え

```lua
TriggerServerEvent("qb-weathersync:server:toggleFreezeTime", bool, minute)
```

#### トグルダイナミック天気

```lua
TriggerServerEvent("qb-weathersync:server:toggleDynamicWeather", bool)
```

## コマンド

/freezetime - 時間の進行を切り替える

/freezeweather - ダイナミックな天気を切り替える

/weather \[type] - 天気を設定する

/blackout - ブラックアウトの切り替え

/morning - 時間を午前9時に設定する

/noon - 時刻を午後12時に設定する

/夕方 - 時間を午後6時に設定する

/夜 - 時間を午後11時に設定

/time \[時] (分) - 任意の時間を設定します
