# サーバー

## トリガー・クライアント・コールバック

### lib.callback

応答は別のコルーチンで処理される。

```lua
lib.callback(name, playerId, cb, ...)
```

* と名付けた：`string`
* playerId：`number`
* cb：`function`
* ...:`any`

```lua
lib.callback('ox:getNearbyVehicles', source, function(vehicles)
    for i = 1, #vehicles do
        DeleteEntity(entity)
    end
end, args.radius)
```

### lib.callback.await

現在のコルーチンは、応答があるまで停止される。

```lua
lib.callback.await(name, playerId, ...)
```

* と名付けた：`string`
* playerId：`number`
* ...:`any`

```lua
local vehicles = lib.callback.await('ox:getNearbyVehicles', source, args.radius)

for i = 1, #vehicles do
    DeleteEntity(entity)
end
```

## サーバー・コールバックの登録

### lib.callback.register

クライアントからのリクエストに応答するためのイベントハンドラを登録します。

```lua
lib.callback.register(name, cb)
```

* と名付けた：`string`
* cb：`function`

```lua
lib.callback.register('ox_inventory:getItemCount', function(source, item, metadata, target)
    local inventory = target and Inventory(target) or Inventory(source)
    return (inventory and Inventory.GetItem(inventory, item, metadata, true)) or 0
end)
```
